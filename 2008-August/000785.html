<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [pvpgn-dev] d2cl, a character list backend to d2cs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pvpgn-dev/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:pvpgn-dev%40lists.berlios.de?Subject=Re%3A%20%5Bpvpgn-dev%5D%20d2cl%2C%20a%20character%20list%20backend%20to%20d2cs&In-Reply-To=%3C82d8d6980808281313r7d49ad72o40c1cf3a5282cb%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000784.html">
   <LINK REL="Next"  HREF="000786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pvpgn-dev] d2cl, a character list backend to d2cs</H1>
    <B>tweek</B> 
    <A HREF="mailto:pvpgn-dev%40lists.berlios.de?Subject=Re%3A%20%5Bpvpgn-dev%5D%20d2cl%2C%20a%20character%20list%20backend%20to%20d2cs&In-Reply-To=%3C82d8d6980808281313r7d49ad72o40c1cf3a5282cb%40mail.gmail.com%3E"
       TITLE="[pvpgn-dev] d2cl, a character list backend to d2cs">tweek.20k at gmail.com
       </A><BR>
    <I>Thu Aug 28 22:13:03 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000784.html">[pvpgn-dev] r491 - trunk/pvpgn/src/bnetd
</A></li>
        <LI>Next message: <A HREF="000786.html">[pvpgn-dev] r492 - in trunk/pvpgn/src: bnetd common
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#785">[ date ]</a>
              <a href="thread.html#785">[ thread ]</a>
              <a href="subject.html#785">[ subject ]</a>
              <a href="author.html#785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings. First-time poster.

I've been working on a patch that will allow users to connect to D2CS
directly to figure out whether a specific character is currently
logged in and playing a game. Here's what I have so far:

<A HREF="http://tweek.no-ip.org/stuff/patch-d2cl.patch">http://tweek.no-ip.org/stuff/patch-d2cl.patch</A>

You can add that patch either to /usr/ports/games/pvpgn/files if
you're using FreeBSD and simply rebuild the port, or copy it to
pvpgn-1.8.3/src/ and use patch -p0 &lt; patch-d2cl.patch otherwise.
Here's a test client, a simple example using BSD sockets to merely
send the user's input into D2CL and print its response.

<A HREF="http://tweek.no-ip.org/stuff/network.c">http://tweek.no-ip.org/stuff/network.c</A>

I tried to follow the general PvPGN code style, and I think I have all
the right calls in place, though I'm not entirely sure. D2CS runs on
every platform I've tested so far (haven't tried Windows) and I'm
currently using it on my server. I need this in order to tell whether
or not it's safe to mess around with a charsave. To use this you'd
connect to D2CS on port 6113 (or wherever it's listening) and send the
byte 5 to indicate a D2CL connection, then you send a simple
null-terminated string embedded within a buffer that's 19 bytes long
for each name you want to check, then listen for the 'yes\n' or 'no\n'
response.

Feedback appreciated!

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000784.html">[pvpgn-dev] r491 - trunk/pvpgn/src/bnetd
</A></li>
	<LI>Next message: <A HREF="000786.html">[pvpgn-dev] r492 - in trunk/pvpgn/src: bnetd common
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#785">[ date ]</a>
              <a href="thread.html#785">[ thread ]</a>
              <a href="subject.html#785">[ subject ]</a>
              <a href="author.html#785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pvpgn-dev">More information about the pvpgn-dev
mailing list</a><br>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [pvpgn-dev] [Bug #11671] bnetd on 64bit sends currupt packets to	tracker
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pvpgn-dev/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:pvpgn-dev%40lists.berlios.de?Subject=Re%3A%20%5Bpvpgn-dev%5D%20%5BBug%20%2311671%5D%20bnetd%20on%2064bit%20sends%20currupt%20packets%20to%0A%09tracker&In-Reply-To=%3C200708160145.l7G1jLu5023574%40unicorn.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000325.html">
   <LINK REL="Next"  HREF="000330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pvpgn-dev] [Bug #11671] bnetd on 64bit sends currupt packets to	tracker</H1>
    <B>admin at berlios.de</B> 
    <A HREF="mailto:pvpgn-dev%40lists.berlios.de?Subject=Re%3A%20%5Bpvpgn-dev%5D%20%5BBug%20%2311671%5D%20bnetd%20on%2064bit%20sends%20currupt%20packets%20to%0A%09tracker&In-Reply-To=%3C200708160145.l7G1jLu5023574%40unicorn.berlios.de%3E"
       TITLE="[pvpgn-dev] [Bug #11671] bnetd on 64bit sends currupt packets to	tracker">admin at berlios.de
       </A><BR>
    <I>Thu Aug 16 03:45:21 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000325.html">[pvpgn-dev] r320 - trunk/pvpgn
</A></li>
        <LI>Next message: <A HREF="000330.html">[pvpgn-dev] [Bug #11671] bnetd on 64bit sends currupt packets to	tracker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#326">[ date ]</a>
              <a href="thread.html#326">[ thread ]</a>
              <a href="subject.html#326">[ subject ]</a>
              <a href="author.html#326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bug #11671, was updated on 2007-Aug-03 10:56
Here is a current snapshot of the bug.

Project: Player vs Player Gaming Network
Category: General
Status: Open
Resolution: None
Bug Group: bnetd
Priority: 5
Submitted by: kernel86
Assigned to : pandaemonium
Summary: bnetd on 64bit sends currupt packets to tracker

Details: The file pvpgn/src/common/tracker.h assumes that the types used in the t_trackpacket struct are the same length on all platforms.  On my Alpha running NetBSD 'unsigned long' is 64bits long, as such the packet sent to the tracker is larger than and not formated as expected.  A simple fix is replacing the 'unsigned long's with 'unsigned', which I believe is 32bits on most all 32bit hosts, not sure about 64bit ones.  Ideally it should be updated with fixed size types.

Follow-Ups:

Date: 2007-Aug-16 03:45
By: pandaemonium

Comment:
The issue should be fixed in both CVS and SVN.

It affected both bnetd sending tracker packets &amp; bntrackd recieving tracker packets.

Could anyone with a 64bit machine please test this?
(Preferably with bnetd and bntrackd both runnung on a 32bit _and_ a 64bit machine. Just to assure its really fixed...)
-------------------------------------------------------

Date: 2007-Aug-15 15:45
By: pandaemonium

Comment:
I currently lack an Alpha to test ;-)

But does replacing &quot;unsigned long&quot; with &quot;t_uint32&quot; resolve the issue for you? (don't forget to also #include &quot;compat/uint.h&quot;)
-------------------------------------------------------

For detailed info, follow this link:
<A HREF="http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=11671&amp;group_id=2291">http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=11671&amp;group_id=2291</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000325.html">[pvpgn-dev] r320 - trunk/pvpgn
</A></li>
	<LI>Next message: <A HREF="000330.html">[pvpgn-dev] [Bug #11671] bnetd on 64bit sends currupt packets to	tracker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#326">[ date ]</a>
              <a href="thread.html#326">[ thread ]</a>
              <a href="subject.html#326">[ subject ]</a>
              <a href="author.html#326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pvpgn-dev">More information about the pvpgn-dev
mailing list</a><br>
</body></html>
